<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Genius Market - KZT Edition</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg: #08090d;
            --surface: #12141c;
            --border: rgba(255, 255, 255, 0.08);
            --accent: #ff8c00;
            --wa-green: #25d366;
            --tg-blue: #0088cc;
            --nft-purple: #a855f7;
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Manrope', sans-serif;
        }

        body {
            background: var(--bg);
            color: var(--text-primary);
            margin: 0;
            padding-bottom: 110px;
            overflow-x: hidden;
            -webkit-user-select: none;
        }

        /* --- –ì–†–ê–î–ò–ï–ù–¢–ù–´–ô –§–û–ù --- */
        .bg-glow {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: 
                radial-gradient(circle at 0% 0%, rgba(255, 140, 0, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 100% 100%, rgba(0, 136, 204, 0.08) 0%, transparent 40%);
            z-index: -1;
        }

        /* --- HEADER --- */
        .header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(8, 9, 13, 0.7);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border);
        }

        .logo-box {
            display: flex;
            flex-direction: column;
        }

        .logo-main {
            font-weight: 800;
            font-size: 20px;
            letter-spacing: -0.5px;
            color: var(--text-primary);
        }

        .logo-main span { color: var(--accent); }

        .balance-pill {
            background: linear-gradient(90deg, #1e212a 0%, #12141c 100%);
            border: 1px solid var(--border);
            padding: 8px 16px;
            border-radius: 100px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .balance-pill i { color: var(--accent); font-size: 14px; }
        .balance-value { font-weight: 800; font-size: 15px; }

        /* --- SEARCH --- */
        .search-container { padding: 15px 20px; }
        .search-box {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 14px 18px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: 0.3s;
        }
        .search-box:focus-within { border-color: var(--accent); box-shadow: 0 0 15px rgba(255, 140, 0, 0.1); }
        .search-box input {
            background: none; border: none; color: white; width: 100%; outline: none; font-size: 15px;
        }

        /* --- TABS & PAGES --- */
        .page { display: none; padding: 0 20px; animation: slideIn 0.3s ease-out; }
        .page.active { display: block; }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .page-title {
            margin: 20px 0;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* --- PRODUCT CARDS --- */
        .item-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
        }

        .item-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
        }
        .wa-card::before { background: var(--wa-green); }
        .tg-card::before { background: var(--tg-blue); }
        .nft-card::before { background: var(--nft-purple); }

        .item-main { display: flex; align-items: center; gap: 15px; }
        
        .item-icon {
            width: 50px; height: 50px; border-radius: 16px;
            display: flex; align-items: center; justify-content: center; font-size: 22px;
        }

        .wa-bg { background: rgba(37, 211, 102, 0.1); color: var(--wa-green); }
        .tg-bg { background: rgba(0, 136, 204, 0.1); color: var(--tg-blue); }
        .nft-bg { background: rgba(168, 85, 247, 0.1); color: var(--nft-purple); }

        .item-info b { display: block; font-size: 16px; margin-bottom: 4px; }
        .item-info span { font-size: 12px; color: var(--text-secondary); }

        .item-price-side { text-align: right; }
        .price-kzt { display: block; font-weight: 800; font-size: 17px; color: var(--accent); margin-bottom: 6px; }
        
        .buy-action-btn {
            background: var(--text-primary);
            color: var(--bg);
            border: none;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
        }

        /* --- BOTTOM NAVIGATION --- */
        .nav-bar {
            position: fixed; bottom: 20px; left: 20px; right: 20px;
            background: rgba(18, 20, 28, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 28px;
            display: flex; padding: 8px;
            justify-content: space-around;
            z-index: 1000;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
        }

        .nav-btn {
            display: flex; flex-direction: column; align-items: center;
            color: var(--text-secondary); text-decoration: none; font-size: 10px;
            padding: 10px 0; width: 23%; transition: 0.3s;
        }

        .nav-btn i { font-size: 20px; margin-bottom: 6px; }
        .nav-btn.active { color: var(--text-primary); }
        .nav-btn.active i { color: var(--accent); transform: translateY(-3px); }

        /* --- MODAL --- */
        .modal-overlay {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px); z-index: 2000; align-items: flex-end;
        }
        .modal-body {
            background: var(--surface); width: 100%; border-radius: 35px 35px 0 0;
            padding: 35px; border-top: 1px solid var(--border);
            transform: translateY(100%); transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .modal-overlay.active .modal-body { transform: translateY(0); }

        .confirm-order-btn {
            width: 100%; padding: 20px; border-radius: 20px; border: none;
            background: var(--accent); color: white; font-size: 16px;
            font-weight: 800; margin-top: 25px;
            box-shadow: 0 8px 25px rgba(255, 140, 0, 0.3);
        }

        /* --- PROFILE --- */
        .profile-card {
            background: linear-gradient(135deg, #1a1c26 0%, #12141c 100%);
            padding: 25px; border-radius: 30px; border: 1px solid var(--border);
            text-align: center; margin-bottom: 20px;
        }
        .user-avatar {
            width: 80px; height: 80px; background: var(--accent);
            border-radius: 25px; margin: 0 auto 15px;
            display: flex; align-items: center; justify-content: center; font-size: 30px;
        }
    </style>
</head>
<body>

    <div class="bg-glow"></div>

    <div class="header">
        <div class="logo-box">
            <div class="logo-main">GENIUS<span>.</span>MARKET</div>
        </div>
        <div class="balance-pill" onclick="topUp()">
            <i class="fas fa-tenge-sign"></i>
            <span class="balance-value" id="top-balance">0 ‚Ç∏</span>
        </div>
    </div>

    <div class="search-container">
        <div class="search-box">
            <i class="fas fa-search" style="color: var(--text-secondary)"></i>
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ —É—Å–ª—É–≥ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." oninput="doSearch()">
        </div>
    </div>

    <div id="page-wa" class="page active">
        <div class="page-title">–ê–∫—Ç–∏–≤–∞—Ü–∏—è WhatsApp</div>
        <div id="list-wa"></div>
    </div>

    <div id="page-tg" class="page">
        <div class="page-title">–°–µ—Ä–≤–∏—Å—ã Telegram</div>
        <div id="list-tg"></div>
    </div>

    <div id="page-nft" class="page">
        <div class="page-title">NFT & –¶–∏—Ñ—Ä–æ–≤—ã–µ –∞–∫—Ç–∏–≤—ã</div>
        <div id="list-nft"></div>
    </div>

    <div id="page-profile" class="page">
        <div class="page-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</div>
        <div class="profile-card">
            <div class="user-avatar"><i class="fas fa-shield-alt"></i></div>
            <h2 id="u-name" style="margin:0">Genius User</h2>
            <p id="u-id" style="color:var(--text-secondary); font-size:14px">ID: ---</p>
        </div>
        <div style="background:var(--surface); border-radius:24px; border:1px solid var(--border); overflow:hidden">
            <div class="p-item" style="padding:18px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center" onclick="tg.showAlert('–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞')">
                <span><i class="fas fa-shopping-bag" style="margin-right:12px; color:var(--accent)"></i> –ú–æ–∏ –ø–æ–∫—É–ø–∫–∏</span>
                <i class="fas fa-chevron-right" style="color:var(--text-secondary)"></i>
            </div>
            <div class="p-item" style="padding:18px; display:flex; justify-content:space-between; align-items:center" onclick="tg.openTelegramLink('https://t.me/support')">
                <span><i class="fas fa-headset" style="margin-right:12px; color:var(--accent)"></i> –¢–µ—Ö. –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                <i class="fas fa-chevron-right" style="color:var(--text-secondary)"></i>
            </div>
        </div>
    </div>

    <nav class="nav-bar">
        <a href="#" class="nav-btn active" onclick="tab('page-wa', this)">
            <i class="fab fa-whatsapp"></i><span>WhatsApp</span>
        </a>
        <a href="#" class="nav-btn" onclick="tab('page-tg', this)">
            <i class="fab fa-telegram-plane"></i><span>Telegram</span>
        </a>
        <a href="#" class="nav-btn" onclick="tab('page-nft', this)">
            <i class="fas fa-gem"></i><span>NFT</span>
        </a>
        <a href="#" class="nav-btn" onclick="tab('page-profile', this)">
            <i class="fas fa-user-ninja"></i><span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </nav>

    <div class="modal-overlay" id="m-overlay" onclick="closeM(event)">
        <div class="modal-body" onclick="event.stopPropagation()">
            <div style="width:40px; height:5px; background:var(--border); margin:-15px auto 25px; border-radius:10px"></div>
            <h2 id="m-title" style="margin-top:0">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
            <div style="background:rgba(255,255,255,0.03); padding:20px; border-radius:20px; border:1px dashed var(--border)">
                <div style="display:flex; justify-content:space-between; margin-bottom:12px">
                    <span style="color:var(--text-secondary)">–£—Å–ª—É–≥–∞</span>
                    <b id="m-target">-</b>
                </div>
                <div style="display:flex; justify-content:space-between">
                    <span style="color:var(--text-secondary)">–ö –æ–ø–ª–∞—Ç–µ</span>
                    <b id="m-price" style="color:var(--accent); font-size:20px">-</b>
                </div>
            </div>
            <button class="confirm-order-btn" onclick="buyProcess()">–û–ü–õ–ê–¢–ò–¢–¨ –ò–ó –ë–ê–õ–ê–ù–°–ê</button>
            <button onclick="closeM()" style="width:100%; background:none; border:none; color:var(--text-secondary); margin-top:20px; font-weight:600">–û–¢–ú–ï–ù–ê</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.backgroundColor = "#08090d";
        tg.headerColor = "#08090d";

        const DB = {
            wa: [
                {n: "–°–®–ê (–§–∏–∑–∏—á–µ—Å–∫–∏–π)", f: "üá∫üá∏", p: 1200, s: "8.4k"},
                {n: "–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω (+7)", f: "üá∞üáø", p: 950, s: "1.2k"},
                {n: "–†–æ—Å—Å–∏—è (–í–∏—Ä—Ç)", f: "üá∑üá∫", p: 450, s: "15k"},
                {n: "–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è", f: "üá¨üáß", p: 1800, s: "500"},
                {n: "–ò–Ω–¥–æ–Ω–µ–∑–∏—è", f: "üáÆüá©", p: 350, s: "9k"}
            ],
            tg: [
                {n: "Premium (1 –º–µ—Å)", f: "‚≠ê", p: 2800, s: "–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ"},
                {n: "Premium (1 –≥–æ–¥)", f: "üíé", p: 19500, s: "–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ"},
                {n: "Fragment (+888)", f: "üì±", p: 8500, s: "15 —à—Ç"},
                {n: "Stars (100)", f: "‚ú®", p: 1100, s: "‚àû"}
            ],
            nft: [
                {n: "Genius VIP Pass", f: "üéüÔ∏è", p: 75000, s: "5 —à—Ç"},
                {n: "Alpha Access Key", f: "üîë", p: 15000, s: "12 —à—Ç"}
            ]
        };

        function render() {
            fill('list-wa', DB.wa, 'wa-card', 'wa-bg');
            fill('list-tg', DB.tg, 'tg-card', 'tg-bg');
            fill('list-nft', DB.nft, 'nft-card', 'nft-bg');
        }

        function fill(id, arr, cStyle, bgStyle) {
            document.getElementById(id).innerHTML = arr.map(i => `
                <div class="item-card ${cStyle}" data-search="${i.n.toLowerCase()}">
                    <div class="item-main">
                        <div class="item-icon ${bgStyle}">${i.f}</div>
                        <div class="item-info">
                            <b>${i.n}</b>
                            <span><i class="fas fa-box-open" style="margin-right:5px"></i> –°–∫–ª–∞–¥: ${i.s}</span>
                        </div>
                    </div>
                    <div class="item-price-side">
                        <span class="price-kzt">${i.p} ‚Ç∏</span>
                        <button class="buy-action-btn" onclick="openM('${i.n}', ${i.p})">–ö—É–ø–∏—Ç—å</button>
                    </div>
                </div>
            `).join('');
        }

        let selected = {};

        function openM(n, p) {
            selected = {n, p};
            document.getElementById('m-target').innerText = n;
            document.getElementById('m-price').innerText = p + " ‚Ç∏";
            const ov = document.getElementById('m-overlay');
            ov.style.display = 'flex';
            setTimeout(() => ov.classList.add('active'), 10);
            tg.HapticFeedback.impactOccurred('medium');
        }

        function closeM() {
            const ov = document.getElementById('m-overlay');
            ov.classList.remove('active');
            setTimeout(() => ov.style.display = 'none', 300);
        }

        function tab(pId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(pId).classList.add('active');
            el.classList.add('active');
            tg.HapticFeedback.impactOccurred('light');
        }

        function doSearch() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('.item-card').forEach(c => {
                c.style.display = c.getAttribute('data-search').includes(q) ? 'flex' : 'none';
            });
        }

        function buyProcess() {
            tg.showConfirm(`–°–ø–∏—Å–∞—Ç—å ${selected.p} ‚Ç∏ –∑–∞ ${selected.n}?`, (ok) => {
                if(ok) {
                    tg.HapticFeedback.notificationOccurred('success');
                    tg.showAlert("–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –û–∂–∏–¥–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–µ.");
                    closeM();
                }
            });
        }

        function topUp() {
            tg.showPopup({
                title: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Ç∏',
                message: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:',
                buttons: [
                    {id: 'kaspikz', type: 'default', text: 'Kaspi.kz'},
                    {id: 'usdt', type: 'default', text: 'USDT (TRC20)'},
                    {id: 'close', type: 'destructive', text: '–û—Ç–º–µ–Ω–∞'}
                ]
            }, (id) => { if(id !== 'close') tg.showAlert("–†–µ–∫–≤–∏–∑–∏—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –±–æ—Ç–æ–º."); });
        }

        if(tg.initDataUnsafe.user) {
            document.getElementById('u-name').innerText = tg.initDataUnsafe.user.first_name;
            document.getElementById('u-id').innerText = "ID: " + tg.initDataUnsafe.user.id;
        }

        render();
        tg.ready();
    </script>
</body>
</html>
