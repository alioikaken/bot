<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Genius Market | Winter Premium</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@700;900&family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-grad: linear-gradient(180deg, #a5c7f0 0%, #dbe9f9 100%);
            --card-bg: rgba(255, 255, 255, 0.85);
            --accent: #007AFF;
            --yellow: #FFD700;
            --text: #1E293B;
            --dim: #64748B;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Manrope', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg-grad); color: var(--text); min-height: 100vh; overflow-x: hidden; padding-bottom: 100px; }
        canvas#snow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }

        /* HEADER */
        header {
            position: sticky; top: 0; z-index: 100;
            background: rgba(255, 255, 255, 0.75); backdrop-filter: blur(15px);
            padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.3);
        }
        .logo { font-family: 'Unbounded'; font-size: 16px; color: var(--accent); }
        .balance-chip {
            background: var(--yellow); padding: 8px 15px; border-radius: 12px;
            font-weight: 900; font-size: 13px; box-shadow: 0 4px 15px rgba(255,215,0,0.3);
        }

        /* SCREENS */
        .screen { display: none; padding: 20px; position: relative; z-index: 10; animation: fadeIn 0.3s ease; }
        .screen.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* CATEGORIES */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 25px; }
        .cat-card {
            background: var(--card-bg); border-radius: 20px; padding: 15px;
            display: flex; flex-direction: column; align-items: center;
            border: 1px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            cursor: pointer;
        }
        .cat-card i { font-size: 26px; margin-bottom: 8px; }
        .cat-card span { font-size: 11px; font-weight: 800; }

        /* ITEMS */
        .item-row {
            background: var(--card-bg); padding: 14px; border-radius: 20px;
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 10px; border: 1px solid white; box-shadow: 0 4px 12px rgba(0,0,0,0.02);
        }
        .item-info { display: flex; align-items: center; gap: 12px; }
        .flag { width: 38px; height: 38px; border-radius: 50%; object-fit: cover; border: 2px solid white; }
        .item-meta h4 { font-size: 14px; font-weight: 800; }
        .item-meta p { font-size: 10px; color: var(--dim); }
        .price-tag {
            background: var(--accent); color: white; padding: 7px 12px;
            border-radius: 10px; font-weight: 800; font-size: 12px;
        }

        /* POPULAR SECTION SPECIAL STYLE */
        .popular-badge {
            background: #FF3B30; color: white; font-size: 8px; font-weight: 900;
            padding: 2px 6px; border-radius: 5px; margin-left: 5px; vertical-align: middle;
        }

        /* NAV BAR */
        nav {
            position: fixed; bottom: 20px; left: 15px; right: 15px;
            background: rgba(255,255,255,0.92); backdrop-filter: blur(20px);
            height: 70px; border-radius: 25px; display: flex; z-index: 1000;
            border: 1px solid white; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--dim); text-decoration: none; }
        .nav-item.active { color: var(--accent); }
        .nav-item i { font-size: 20px; margin-bottom: 4px; }
        .nav-item span { font-size: 9px; font-weight: 800; text-transform: uppercase; }

        .back-btn { margin-bottom: 15px; color: var(--accent); font-weight: 800; cursor: pointer; display: flex; align-items: center; gap: 5px; }
    </style>
</head>
<body>

<canvas id="snow"></canvas>

<header>
    <div class="logo">GENIUS MARKET</div>
    <div class="balance-chip">5,450 ‚Ç∏</div>
</header>

<div id="market-screen" class="screen active">
    <h2 style="font-family:'Unbounded'; font-size: 13px; margin-bottom: 15px; color: var(--accent);">–ö–ê–¢–ï–ì–û–†–ò–ò</h2>
    <div class="grid">
        <div class="cat-card" onclick="showCategory('Telegram')"><i class="fa-brands fa-telegram" style="color:#229ED9"></i><span>Telegram</span></div>
        <div class="cat-card" onclick="showCategory('WhatsApp')"><i class="fa-brands fa-whatsapp" style="color:#25D366"></i><span>WhatsApp</span></div>
        <div class="cat-card" onclick="showCategory('TikTok')"><i class="fa-brands fa-tiktok" style="color:#000"></i><span>TikTok</span></div>
        <div class="cat-card" onclick="showCategory('Instagram')"><i class="fa-brands fa-instagram" style="color:#E1306C"></i><span>Instagram</span></div>
        <div class="cat-card" onclick="showCategory('NFT')"><i class="fa-solid fa-gem" style="color:var(--yellow)"></i><span>NFT</span></div>
        <div class="cat-card" onclick="showCategory('VPN')"><i class="fa-solid fa-shield-halved" style="color:var(--accent)"></i><span>VPN</span></div>
    </div>
    
    <h2 style="font-family:'Unbounded'; font-size: 13px; margin-bottom: 15px; color: var(--accent);">–ü–û–ü–£–õ–Ø–†–ù–û–ï üî•</h2>
    <div id="popular-list">
        </div>
</div>

<div id="category-screen" class="screen">
    <div class="back-btn" onclick="showScreen('market-screen')"><i class="fa-solid fa-chevron-left"></i> –ù–∞–∑–∞–¥</div>
    <h2 id="cat-title" style="font-family:'Unbounded'; font-size: 18px; margin-bottom: 20px;"></h2>
    <div id="items-list"></div>
</div>

<div id="purchases-screen" class="screen">
    <h2 style="font-family:'Unbounded'; margin-bottom: 20px;">–ú–û–ò –ü–û–ö–£–ü–ö–ò</h2>
    <p style="text-align: center; color: var(--dim); margin-top: 50px;">–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç ‚ùÑÔ∏è</p>
</div>

<div id="wallet-screen" class="screen">
    <div style="background:var(--card-bg); padding: 30px; border-radius: 25px; text-align: center; border: 1px solid white;">
        <p style="color:var(--dim); font-weight: 700;">–ë–∞–ª–∞–Ω—Å</p>
        <h1 style="font-family:'Unbounded'; font-size: 32px; margin: 10px 0;">5,450 ‚Ç∏</h1>
        <button style="width:100%; padding:15px; border-radius:15px; border:none; background:var(--accent); color:white; font-weight:800; margin-top:10px;" onclick="tg.showAlert('–ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ–ø–ª–∞—Ç–µ...')">–ü–û–ü–û–õ–ù–ò–¢–¨</button>
    </div>
</div>

<div id="profile-screen" class="screen">
    <div style="background:var(--card-bg); padding: 25px; border-radius: 25px; text-align: center; border: 1px solid white;">
        <div style="width:60px; height:60px; background:#eee; border-radius:50%; margin:0 auto 10px; display:flex; align-items:center; justify-content:center; font-size:24px; color:var(--accent);"><i class="fa-solid fa-user"></i></div>
        <h3 style="font-family:'Unbounded'; font-size: 16px;">User_777</h3>
        <p style="font-size:12px; color:var(--dim);">ID: 9021442</p>
    </div>
</div>

<nav>
    <div class="nav-item active" onclick="showScreen('market-screen', this)"><i class="fa-solid fa-store"></i><span>–ú–∞—Ä–∫–µ—Ç</span></div>
    <div class="nav-item" onclick="showScreen('purchases-screen', this)"><i class="fa-solid fa-bag-shopping"></i><span>–ü–æ–∫—É–ø–∫–∏</span></div>
    <div class="nav-item" onclick="showScreen('wallet-screen', this)"><i class="fa-solid fa-wallet"></i><span>–ö–æ—à–µ–ª–µ–∫</span></div>
    <div class="nav-item" onclick="showScreen('profile-screen', this)"><i class="fa-solid fa-user-gear"></i><span>–ü—Ä–æ—Ñ–∏–ª—å</span></div>
</nav>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const db = {
        'Telegram': [
            { name: 'Premium 1 –ì–æ–¥', desc: 'Gift —Å—Å—ã–ª–∫–∞', price: '12,000 ‚Ç∏', flag: 'un', pop: true },
            { name: '–ê–∫–∫–∞—É–Ω—Ç RU', desc: '–û—Ç–ª–µ–∂–∫–∞ 30 –¥–Ω–µ–π', price: '450 ‚Ç∏', flag: 'ru', pop: true },
            { name: '–ê–∫–∫–∞—É–Ω—Ç KZ', desc: '–ê–≤—Ç–æ—Ä–µ–≥ + –ø–æ—á—Ç–∞', price: '800 ‚Ç∏', flag: 'kz' },
            { name: '–ê–∫–∫–∞—É–Ω—Ç US', desc: '–ß–∏—Å—Ç—ã–π –Ω–æ–º–µ—Ä', price: '600 ‚Ç∏', flag: 'us' }
        ],
        'WhatsApp': [
            { name: '–ù–æ–º–µ—Ä KZ', desc: '–î–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫', price: '1,500 ‚Ç∏', flag: 'kz', pop: true },
            { name: '–ù–æ–º–µ—Ä RU', desc: '–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∫–æ–¥', price: '1,100 ‚Ç∏', flag: 'ru' }
        ],
        'VPN': [
            { name: 'Genius VPN Pro', desc: '1 –ú–µ—Å—è—Ü / 5 —É—Å—Ç—Ä–æ–π—Å—Ç–≤', price: '1,800 ‚Ç∏', flag: 'un', pop: true }
        ],
        'TikTok': [
            { name: '–ê–∫–∫–∞—É–Ω—Ç USA', desc: 'Creator Rewards', price: '2,500 ‚Ç∏', flag: 'us', pop: true }
        ],
        'Instagram': [
            { name: 'Old Acc 2016', desc: '–¢—É—Ä—Ü–∏—è, —á–∏—Å—Ç—ã–π', price: '4,000 ‚Ç∏', flag: 'tr' }
        ],
        'NFT': [
            { name: 'Genius Snow #01', desc: 'Collection 2026', price: '25,000 ‚Ç∏', flag: 'un' }
        ]
    };

    function renderPopular() {
        const popList = document.getElementById('popular-list');
        popList.innerHTML = '';
        Object.keys(db).forEach(cat => {
            db[cat].forEach(item => {
                if(item.pop) {
                    const flagUrl = item.flag === 'un' ? 'https://cdn-icons-png.flaticon.com/512/624/624410.png' : `https://flagcdn.com/w160/${item.flag}.png`;
                    popList.innerHTML += `
                        <div class="item-row" onclick="buy('${item.name}')">
                            <div class="item-info">
                                <img src="${flagUrl}" class="flag">
                                <div class="item-meta">
                                    <h4>${item.name} <span class="popular-badge">HOT</span></h4>
                                    <p>${item.desc}</p>
                                </div>
                            </div>
                            <div class="price-tag">${item.price}</div>
                        </div>
                    `;
                }
            });
        });
    }

    function showCategory(cat) {
        document.getElementById('cat-title').innerText = cat.toUpperCase();
        const list = document.getElementById('items-list');
        list.innerHTML = '';
        db[cat].forEach(item => {
            const flagUrl = item.flag === 'un' ? 'https://cdn-icons-png.flaticon.com/512/624/624410.png' : `https://flagcdn.com/w160/${item.flag}.png`;
            list.innerHTML += `
                <div class="item-row" onclick="buy('${item.name}')">
                    <div class="item-info">
                        <img src="${flagUrl}" class="flag">
                        <div class="item-meta">
                            <h4>${item.name}</h4>
                            <p>${item.desc}</p>
                        </div>
                    </div>
                    <div class="price-tag">${item.price}</div>
                </div>
            `;
        });
        showScreen('category-screen');
    }

    function showScreen(id, nav) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(nav) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            nav.classList.add('active');
        }
        tg.HapticFeedback.impactOccurred('light');
    }

    function buy(name) {
        tg.HapticFeedback.notificationOccurred('warning');
        tg.showConfirm(`–ö—É–ø–∏—Ç—å ${name}?`);
    }

    // –°–ù–ï–ì
    const canvas = document.getElementById('snow');
    const ctx = canvas.getContext('2d');
    let flakes = [];
    function initSnow() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        for(let i=0; i<60; i++) flakes.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*3+1, s: Math.random()*0.8+0.3});
    }
    function drawSnow() {
        ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle = "white"; ctx.beginPath();
        flakes.forEach(f => { ctx.moveTo(f.x, f.y); ctx.arc(f.x, f.y, f.r, 0, Math.PI*2); f.y += f.s; if(f.y > canvas.height) f.y = -5; });
        ctx.fill(); requestAnimationFrame(drawSnow);
    }
    initSnow(); drawSnow();
    renderPopular();
</script>
</body>
</html>
